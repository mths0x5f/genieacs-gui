{"version":3,"file":"static/webpack/static/development/pages/devices.js.9d9064fce5bd5d740547.hot-update.js","sources":["webpack:///./pages/devices.js"],"sourcesContent":["import React, { Component } from 'react'\nimport { Button, Icon, Table, Typography, Divider } from 'antd'\nimport Link from 'next/link'\nimport { withRouter } from 'next/router'\n\nimport BaseLayout from '../components/Layout'\nimport DevicesTable from '../components/devices/Table'\nimport FilterModal from '../components/ui/FilterModal'\n\nconst cols = {\n  Serial_Number: ['_deviceId._SerialNumber'],\n  Manufacturer: ['_deviceId._Manufacturer'],\n  Product_Class: ['_deviceId._ProductClass'],\n  Software_Version: ['InternetGatewayDevice.DeviceInfo.SoftwareVersion'],\n  Model_Name: ['InternetGatewayDevice.DeviceInfo.ModelName'],\n  ID: ['_id'],\n  Last_Inform: ['_lastInform'],\n}\n\nclass Devices extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      header: {},\n      params: { ...props.router.query },\n      modalVisible: false,\n    }\n  }\n\n  componentWillMount = () => {\n    this.fillHeader()\n  }\n\n  fillHeader = () => {\n    let header\n    if (this.state.params.action === 'show')\n      header = {\n        title: this.state.params.id,\n        subtitle: 'this.state.params.id',\n        extra: (\n          <div>\n            <Button type=\"primary\" style={{ margin: '0 5px' }}>\n              Refresh\n            </Button>\n            <Button type=\"default\" style={{ margin: '0 5px' }}>\n              Ping\n            </Button>\n            <Button type=\"dashed\" style={{ margin: '0 5px' }}>\n              Reboot\n            </Button>\n            {/* <Button type=\"danger\" style={{margin:'0 5px'}}>Factory reset</Button> */}\n            {/* <Button type=\"danger\" style={{margin:'0 5px'}}>Delete</Button> */}\n          </div>\n        ),\n        footer: (\n          <div style={{ padding: 15 }}>\n            <table>\n              <tr>\n                <td>\n                  <b>fsdfsdfsd</b>\n                </td>\n                <td> dsadasdsadas</td>\n              </tr>\n              <tr>\n                <td>\n                  <b>fsdfsdfsd</b>\n                </td>\n                <td> dsadasdsadas</td>\n              </tr>\n              <tr>\n                <td>\n                  <b>fsdfsdfsd</b>\n                </td>\n                <td> dsadasdsadas</td>\n              </tr>\n            </table>\n          </div>\n        ),\n        breadcrumb: '',\n      }\n    else header = { title: 'Devices' }\n    this.setState({ header })\n  }\n\n  showModal = () => this.setState({ modalVisible: true })\n\n  handleFilterChange = filter => {\n    console.log(filter)\n    this.setState({ query: filter, modalVisible: false })\n  }\n\n  handleCancel = e => this.setState({ modalVisible: false })\n\n  render = () => {\n    return (\n      <BaseLayout\n        title={this.state.header.title}\n        subtitle={this.state.header.subtitle}\n        extra={this.state.header.extra}\n        footer={this.state.header.footer}\n      >\n        {this.state.params.action === 'show' ? (\n          <div />\n        ) : (\n          <div>\n            <Button\n              type=\"primary\"\n              onClick={this.showModal}\n              style={{ margin: '0 5px 20px' }}\n            >\n              <Icon type=\"filter\" theme=\"filled\" />\n              Filters\n            </Button>\n            <Button\n              type=\"default\"\n              // onClick={() => this.setState({ query: {} })}\n              href=\"/devices\"\n              style={{ margin: '0 5px 20px' }}\n            >\n              Clear filters\n            </Button>\n\n            <FilterModal\n              defaultFormValue={this.state.params.query}\n              visible={this.state.modalVisible}\n              fields={cols}\n              onFilterChange={this.handleFilterChange}\n              onCancel={this.handleCancel}\n            />\n            <DevicesTable\n              // query={JSON.parse(this.state.params.query)}\n              query={this.state.query}\n              startPage={this.state.params.page}\n              sort={this.state.params.sort}\n              footer={() => (\n                <Button type=\"default\">\n                  <Icon type=\"file-excel\" theme=\"filled\" />\n                  Download CSV\n                </Button>\n              )}\n            />\n          </div>\n        )}\n      </BaseLayout>\n    )\n  }\n}\n\nexport default withRouter(Devices)\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AACA;AASA;;;;;AACA;AAAA;AACA;AADA;AACA;AAAA;AACA;AAFA;AAUA;AACA;AACA;AAZA;AAcA;AACA;AAEA;AACA;AACA;AAEA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAOA;AACA;AAAA;AAAA;AAAA;AAuBA;AA1CA;AA4CA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AA/DA;AAgEA;AAAA;AAAA;AAAA;AACA;AAjEA;AAmEA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAtEA;AAuEA;AAAA;AAAA;AAAA;AACA;AAxEA;AA0EA;AAEA;AACA;AACA;AACA;AAJA;AAWA;AACA;AACA;AAAA;AAAA;AAHA;AAKA;AAAA;AAAA;AAIA;AADA;AAGA;AACA;AAAA;AAAA;AAJA;AAUA;AACA;AACA;AACA;AACA;AALA;AAOA;AAEA;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAFA;AALA;AAgBA;AACA;AA5HA;AACA;AACA;AACA;AAHA;AAFA;AAOA;AACA;;AATA;AACA;AAgIA;;;;A","sourceRoot":""}